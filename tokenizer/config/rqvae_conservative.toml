[prep]
source_db = "../../output/anilist.sqlite"
out_dir = "../output"
rebuild = true
export_parquet = true
limit = 0

[embedd]
tokenizer_db = "../output/tokenizer.sqlite"
env_file = "../.env"
rebuild = true
limit = 0
model_name = "tencent/KaLM-Embedding-Gemma3-12B-2511"
batch_size = 8
max_length = 2048
device = "auto"
precision = "auto"
hf_token = ""
hf_token_env = "HF_TOKEN"
normalize = true

[rqvae]
tokenizer_db = "../output/tokenizer.sqlite"
out_dir = "../output/rqvae_conservative"
rebuild = true
limit = 0
device = "cuda"
seed = 42
batch_size = 192
epochs = 60
num_workers = 4
val_ratio = 0.05
lr = 0.000025
adam_beta1 = 0.5
adam_beta2 = 0.9
warmup_steps = 3000
latent_dim = 256
rq_levels = 8
codebook_size = 2048
commitment_beta = 0.20
ema_decay = 0.995
ema_eps = 0.00001
restart_unused_codes = true
amp = true
checkpoint_every = 1
encoder_hidden_dim = 1024
decoder_hidden_dim = 1024
dry_run = false
dry_run_limit = 512
dry_run_epochs = 1
dry_run_batch_size = 32
dry_run_num_workers = 0
dry_run_out_subdir = "dry_run"
env_file = "../.env"
wandb_enabled = true
wandb_mode = "online"
wandb_project = "AniMind"
wandb_entity = "cyoab"
wandb_api_key = ""
wandb_run_name = "rqvae-conservative"
wandb_group = ""
wandb_tags = ["rqvae", "conservative"]
wandb_project_env = "WANDB_PROJECT"
wandb_entity_env = "WANDB_ENTITY"
wandb_api_key_env = "WANDB_API_KEY"
resume_from = ""
resume_strict = true

[tokenize]
tokenizer_db = "../output/tokenizer.sqlite"
source_db = "../../output/anilist.sqlite"
rqvae_checkpoint = "../output/rqvae_conservative/rqvae_best.pt"
out_dir = "../output/tokenize_conservative"
rebuild = true
limit = 0
device = "auto"
batch_size = 512
write_db_tables = false
special_tokens = ["<anime_start>", "<anime_end>", "<watch>", "<liked>", "<disliked>", "<dropped>"]
semantic_id_concat = true
semantic_id_separator = ""
cluster_sample_size = 10
cluster_min_bucket = 20
cluster_random_seed = 42
recall_k = 20
recall_min_support = 10
recall_positive_score_min = 7
recall_completed_status = 2
recall_max_queries = 500
recall_max_rows = 0
recall_seed = 42
dry_run = false
dry_run_limit = 512
dry_run_out_subdir = "dry_run"
